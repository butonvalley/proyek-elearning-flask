{% extends "layout.html" %}
{% block title %}Periksa Tugas{% endblock %}

{% block content %}

<div class="bg-white shadow-xl rounded-2xl p-10 max-w-4xl mx-auto w-full">
  <!-- Tampilkan flash message -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="mb-4">
      {% for category, message in messages %}
      <div class="px-4 py-2 rounded mb-2
                        {% if category == 'success' %} bg-green-100 text-green-700
                        {% elif category == 'error' %} bg-red-100 text-red-700
                        {% elif category == 'warning' %} bg-yellow-100 text-yellow-700
                        {% else %} bg-gray-100 text-gray-700 {% endif %}">
        {{ message }}
      </div>
      {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    <h1 class="text-2xl font-bold mb-4">
    Periksa Tugas 
  </h1>
  <h2 class="text-xl font-bold mb-4">
     {{ kelas.nama }} â€“ {{ tugas.judul }}
  </h2>

  {% for j in jawaban_mahasiswa %}
  <div class="border p-4 rounded mb-3 flex justify-between items-center">
    <div>
      <p class="font-bold">{{ j.mahasiswa.user.fullname }}</p>
      <a href="{{ url_for('static', filename=j.file_jawaban) }}" class="underline text-blue-600" target="_blank">
        Lihat Jawaban
      </a>
    </div>

  
    <form method="POST" class="flex gap-2 items-center">
       {{ form_tugas_mahasiswa.hidden_tag() }}
      <input type="hidden" name="jawaban_id" value="{{ j.id }}">

      <input type="number" step="0.1" name="nilai" value="{{ j.nilai or '' }}" class="w-20 border rounded px-2 py-1">

      <button type="submit" class="bg-green-600 text-white px-3 py-1 rounded">
        Simpan
      </button>
    </form>
  </div>
  {% else %}
  <p class="text-gray-500">Belum ada jawaban mahasiswa.</p>
  {% endfor %}




  {% endblock %}